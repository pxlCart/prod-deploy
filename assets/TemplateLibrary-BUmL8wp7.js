import{V as e,r as s,j as t,W as a,e as l,H as r,X as i,L as n,m as o,a as c,U as d,S as x,R as m}from"./index-CxscT09Y.js";import{O as u,c as p}from"./index-Dg0Qh9jE.js";import{u as g}from"./useDarkMode-uytT8DPn.js";import{S as h,T as f}from"./SneakPeekPreview-B0vwDacu.js";import{G as b}from"./GradientButton-BmUonBY4.js";import{F as j}from"./TemplateRenderer-DboS4ZpZ.js";import{S as y}from"./Loading-BBArv5GN.js";import{S as k,c as v}from"./x-C-WXaDeE.js";import{R as w,i as N,j as z,F as C,I as F,k as P,D as S,l as A,m as T,n as L,o as M,p as R}from"./lucide-react-Dm8ijxDf.js";import{a as D}from"./zoom-out-BkmDqjxf.js";import"./PaymentModal-BQ985snT.js";import"./index-C08PnImj.js";import"./server.browser-BDVDZUy1.js";import"./zap-C1hV3rjf.js";const E="relative p-6 rounded-2xl shadow-xl transition-all duration-300 backdrop-blur-lg animate-card-fade-in bg-white/60 border border-slate-200/70 dark:bg-slate-800/50 dark:border-white/10",I={type:"id-card",searchTerm:"",isFeatured:!1,isBatch:!1,isFree:!1,isPaid:!1,design:"system"},$=()=>{const e=l();return t.jsxs("header",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx(r,{size:44,className:"text-cyan-500 dark:text-cyan-400"}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-4xl font-bold tracking-tight text-slate-900 dark:text-white",children:"Template Library"}),t.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1",children:"Your design playground awaits. Start from a template or a blank canvas."})]})]}),t.jsx(b,{onClick:()=>e("/editor"),iconName:"Plus",size:"md",children:"New Design"})]})},B=({templates:e,isLoading:s,error:a,onPreviewIconClick:l,currentUserPlan:r})=>s?t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:[...Array(8)].map((e,s)=>t.jsx("div",{className:"bg-slate-200 dark:bg-slate-800 rounded-xl shadow animate-pulse aspect-[3/4]"},`skeleton-${s}`))}):a||!e||0===e.length?t.jsxs("div",{className:`${E} flex flex-col items-center justify-center h-full min-h-[50vh] text-center`,children:[t.jsx(P,{size:48,strokeWidth:1.5,className:"mx-auto text-slate-400 dark:text-slate-500 mb-5"}),t.jsx("h3",{className:"text-xl font-semibold text-slate-700 dark:text-slate-200 mb-2",children:a?"An Error Occurred":"No Templates Found"}),t.jsx("p",{className:"text-slate-500 dark:text-slate-400 max-w-xs mx-auto mb-6",children:a||"Try adjusting your search or filters."}),t.jsxs(n,{to:"/editor",className:"group inline-flex items-center justify-center px-5 py-2.5 font-medium text-white bg-cyan-600 hover:bg-cyan-700 rounded-lg shadow-md hover:shadow-lg transition-all transform hover:scale-105",children:[t.jsx(S,{size:18,className:"mr-2"}),"Create From Scratch"]})]}):t.jsx(o.div,{layout:!0,variants:{visible:{transition:{staggerChildren:.05}}},initial:"hidden",animate:"visible",className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:t.jsx(c,{children:e.map((e,s)=>e?.id&&t.jsx(f,{template:e,index:s,onPreviewIconClick:l,currentUserPlan:r},e.id))})}),U=({filters:e,setFilters:a})=>{const[l,r]=s.useState([]);s.useEffect(()=>{i().then(e=>e&&e.length>0&&r([...e].sort((e,s)=>s.count-e.count))).catch(console.error)},[]);const n=(e,s)=>a(t=>({...t,[e]:s})),o=e=>a(s=>({...s,[e]:!s[e]})),c={all:t.jsx(x,{size:16}),certificate:t.jsx(R,{size:16}),"id-card":t.jsx(T,{size:16}),"business-card":t.jsx(M,{size:16}),custom:t.jsx(L,{size:16}),"event-badge":t.jsx(T,{size:16}),letterhead:t.jsx(D,{size:16})},m={all:t.jsx(z,{size:16}),mine:t.jsx(d,{size:16}),system:t.jsx(A,{size:16})};return t.jsx("aside",{className:"w-full md:w-64 lg:w-72 flex-shrink-0",children:t.jsxs("div",{className:`${E} space-y-6`,children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("div",{className:"relative flex-grow",children:[t.jsx(k,{size:18,className:"absolute left-3.5 top-1/2 -translate-y-1/2 text-slate-400 pointer-events-none"}),t.jsx("input",{type:"text",placeholder:"Search templates...",className:"w-full py-2.5 pl-10 pr-4 bg-white/50 dark:bg-slate-900/50 text-slate-800 dark:text-slate-200 rounded-lg border border-slate-300 dark:border-slate-700 focus:bg-white dark:focus:bg-slate-900 focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 transition",value:e.searchTerm||"",onChange:e=>n("searchTerm",e.target.value)})]}),t.jsx("button",{onClick:()=>a(I),title:"Reset Filters",className:"p-2.5 text-slate-500 dark:text-slate-400 hover:text-cyan-500 dark:hover:text-cyan-400 bg-white/50 dark:bg-slate-900/50 rounded-lg border border-slate-300 dark:border-slate-700 transition",children:t.jsx(w,{size:18})})]}),t.jsxs("div",{children:[t.jsxs("h3",{className:"font-semibold flex items-center gap-2 text-slate-800 dark:text-slate-200 text-lg px-1 mb-3",children:[t.jsx(N,{size:18})," Filters"]}),t.jsxs(O,{title:"Design",children:[t.jsx(Y,{label:"All Designs",icon:m.all,isActive:"all"===e.design,onClick:()=>n("design","all")}),t.jsx(Y,{label:"My Designs",icon:m.mine,isActive:"mine"===e.design,onClick:()=>n("design","mine")}),t.jsx(Y,{label:"System",icon:m.system,isActive:"system"===e.design,onClick:()=>n("design","system")})]}),t.jsxs(O,{title:"Type",children:[t.jsx(Y,{label:"All Templates",icon:c.all,isActive:"all"===e.type,onClick:()=>n("type","all")}),l.map(s=>t.jsx(Y,{label:s.name.replace(/[-_]/g," "),icon:c[s.id]||t.jsx(D,{size:16}),count:s.count,isActive:e.type===s.id,onClick:()=>n("type",s.id)},s.id))]}),t.jsxs(O,{title:"Quick Filters",children:[t.jsx(G,{label:"Featured",icon:t.jsx(v,{size:16}),isActive:e.isFeatured,onClick:()=>o("isFeatured")}),t.jsx(G,{label:"Batch Ready",icon:t.jsx(z,{size:16}),isActive:e.isBatch,onClick:()=>o("isBatch")}),t.jsx(G,{label:"Free",icon:t.jsx(C,{size:16}),isActive:e.isFree,onClick:()=>o("isFree")}),t.jsx(G,{label:"Paid",icon:t.jsx(F,{size:16}),isActive:e.isPaid,onClick:()=>o("isPaid")})]})]})]})})},O=({title:e,children:s})=>t.jsxs("div",{className:"pt-4 border-t border-slate-200/80 dark:border-white/10 first-of-type:border-t-0 first-of-type:pt-0",children:[t.jsx("h4",{className:"px-1 text-xs font-semibold uppercase text-slate-500 dark:text-slate-400 mb-2 tracking-wider",children:e}),t.jsx("div",{className:"space-y-1",children:s})]}),Y=({label:e,icon:s,count:a,isActive:l,onClick:r})=>t.jsxs("button",{onClick:r,className:"relative w-full flex items-center justify-between gap-3 px-3 py-2 text-sm rounded-lg text-left transition-colors "+(l?"bg-cyan-500/10 dark:bg-cyan-500/20 text-cyan-700 dark:text-cyan-300 font-semibold":"text-slate-600 dark:text-slate-300 hover:bg-black/5 dark:hover:bg-white/5"),children:[t.jsxs("span",{className:"flex items-center gap-2.5 capitalize",children:[s," ",e]}),void 0!==a&&t.jsx("span",{className:"text-xs font-mono px-1.5 py-0.5 rounded "+(l?"bg-cyan-500/20 dark:bg-cyan-500/30":"bg-slate-200 dark:bg-slate-700"),children:a}),l&&t.jsx(o.div,{layoutId:"activeFilterHighlight",className:"absolute left-0 top-1/4 h-1/2 w-1 bg-cyan-500 rounded-r-full"})]}),G=({label:e,icon:s,isActive:a,onClick:l})=>t.jsxs("button",{onClick:l,type:"button",className:"w-full flex items-center justify-between px-3 py-2.5 text-sm font-medium text-slate-600 dark:text-slate-300 rounded-lg hover:bg-black/5 dark:hover:bg-white/5 transition-colors",children:[t.jsxs("span",{className:"flex items-center gap-2",children:[m.cloneElement(s,{className:"transition-colors "+(a?"text-cyan-500":"text-slate-400")})," ",e]}),t.jsx("div",{className:"relative w-10 h-5 flex items-center rounded-full transition-colors duration-200 "+(a?"bg-cyan-500":"bg-slate-300 dark:bg-slate-600"),children:t.jsx(o.div,{layout:!0,className:"w-4 h-4 bg-white rounded-full shadow-md",style:{position:"absolute",left:a?"1.35rem":"0.15rem"},transition:{type:"spring",stiffness:700,damping:30}})})]}),H=()=>{const{isDarkMode:l}=g(),{currentUserPlan:r}=e(),[i,n]=s.useState(I),[o,c]=s.useState([]),[d,x]=s.useState(1),[m,f]=s.useState(!0),[b,k]=s.useState(!0),[v,w]=s.useState(!1),[N,z]=s.useState(null),[C,F]=s.useState(null),P=s.useRef(null),S=s.useRef(!1),A=s.useRef(null);s.useEffect(()=>{const e=P.current;if(!e)return;const s=s=>{e.style.setProperty("--mouse-x",`${s.clientX}px`),e.style.setProperty("--mouse-y",`${s.clientY}px`)};return window.addEventListener("mousemove",s),()=>window.removeEventListener("mousemove",s)},[]),s.useEffect(()=>{c([]),x(1),f(!0),P.current?.scrollTo(0,0)},[i]),s.useEffect(()=>(clearTimeout(A.current),A.current=setTimeout(async()=>{if(!(S.current||!m&&d>1)){S.current=!0,1===d?k(!0):w(!0),z(null);try{const e=await a({...i,page:d,limit:12});c(s=>1===d?e.templates:[...s,...e.templates]),f(e.hasMore)}catch(e){const s=e.message||"Failed to load templates.";z(s),p.error(s)}finally{1===d?k(!1):w(!1),S.current=!1}}},300),()=>clearTimeout(A.current)),[i,d]);const T=s.useCallback(e=>F(e),[]),L=s.useCallback(()=>F(null),[]);return t.jsxs("div",{className:"min-h-screen bg-slate-100 dark:bg-slate-950 font-sans text-slate-800 dark:text-slate-200 transition-colors duration-300",style:{backgroundImage:`radial-gradient(circle at var(--mouse-x) var(--mouse-y), ${l?"rgba(6, 182, 212, 0.1)":"rgba(56, 189, 248, 0.15)"}, transparent 40vw), linear-gradient(to bottom, transparent 85%, ${l?"#0f172a":"#f1f5f9"} 100%)`,backgroundBlendMode:"normal"},children:[t.jsx(j,{fonts:["Poppins","Montserrat","Inter","Roboto","Oswald","Lato","Playfair Display","Merriweather","Georgia","Helvetica","Arial"]}),t.jsx(u,{position:"top-center",toastOptions:{className:"dark:bg-slate-800 dark:text-white",duration:3e3}}),t.jsxs("div",{className:"p-4 sm:p-6 md:p-8 space-y-8",children:[t.jsx($,{}),t.jsxs("div",{className:"flex flex-col md:flex-row gap-8",children:[t.jsx(U,{filters:i,setFilters:n}),t.jsxs("main",{className:"flex-1 min-w-0",children:[t.jsx("h2",{className:"text-lg font-medium text-slate-700 dark:text-slate-300 mb-5 px-2",children:b?"Finding templates...":`Showing ${o.length} templates`}),t.jsx(B,{templates:o,isLoading:b&&1===d,error:N,onPreviewIconClick:T,currentUserPlan:r}),t.jsxs("div",{className:"flex justify-center mt-8",children:[m&&!b&&!v&&t.jsx("button",{onClick:()=>x(e=>e+1),className:"inline-flex items-center gap-2 px-6 py-2 text-sm font-semibold rounded-lg bg-slate-200/70 hover:bg-slate-300/70 dark:bg-slate-700 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-200 transition-colors",children:"Load More"}),v&&t.jsx(y,{})]})]})]})]}),t.jsx(h,{templateId:C,currentUserPlan:r,onClose:L}),t.jsx("style",{children:":root { --glow-color: #06b6d4; } .tag { @apply inline-block bg-slate-200 dark:bg-slate-700 text-slate-600 dark:text-slate-300 text-xs font-semibold px-2.5 py-1 rounded-full; } .text-shadow { text-shadow: 1px 1px 3px rgba(0,0,0,0.5); } .animate-card-fade-in { opacity: 0; transform: translateY(20px); animation: card-fade-in 0.8s ease-out forwards; } @keyframes card-fade-in { to { opacity: 1; transform: translateY(0); } } .animate-fade-in { animation: fade-in 1s ease-out forwards; opacity: 0; }"})]})};export{H as default};
