import{r as e,j as t,A as s,a,m as r,u as l,L as i,b as n,N as o,c as d,d as c,O as x,e as m,P as u}from"./index-CxscT09Y.js";import{u as h}from"./useDarkMode-uytT8DPn.js";import{F as p}from"./FallbackAvatar-P-4t8Jcq.js";import{T as b}from"./ThemeToggle-BS9HM_JZ.js";import{B as f,M as g,L as v,P as j}from"./lucide-react-Dm8ijxDf.js";import{S as k}from"./Loading-BBArv5GN.js";import{F as y}from"./zoom-out-BkmDqjxf.js";import{A as N}from"./zap-C1hV3rjf.js";import{C as w}from"./x-C-WXaDeE.js";function E(e){for(var t=[],s=1;s<arguments.length;s++)t[s-1]=arguments[s];e&&e.addEventListener&&e.addEventListener.apply(e,t)}function L(e){for(var t=[],s=1;s<arguments.length;s++)t[s-1]=arguments[s];e&&e.removeEventListener&&e.removeEventListener.apply(e,t)}var C=["mousedown","touchstart"],I=function(t,s,a){void 0===a&&(a=C);var r=e.useRef(s);e.useEffect(function(){r.current=s},[s]),e.useEffect(function(){for(var e=function(e){var s=t.current;s&&!s.contains(e.target)&&r.current(e)},s=0,l=a;s<l.length;s++){var i=l[s];E(document,i,e)}return function(){for(var t=0,s=a;t<s.length;t++){var r=s[t];L(document,r,e)}}},[a,t])};const T=({to:e,icon:s,label:n,collapsed:o,DynamicLucideIcon:d})=>{const c=l(),x="/dashboard"===e&&c.pathname===e||"/dashboard"!==e&&c.pathname.startsWith(e);return t.jsxs(i,{to:e,title:o?n:"",className:"group relative flex items-center h-11 my-1 text-sm rounded-lg transition-colors duration-200\n                "+(x?"font-semibold":"font-medium text-slate-500 dark:text-slate-400 hover:bg-slate-200/50 dark:hover:bg-slate-800/60"),children:[x&&t.jsx(r.div,{layoutId:"active-nav-badge",className:"absolute inset-0 bg-white dark:bg-slate-800 border border-slate-200/80 dark:border-slate-700 shadow-md rounded-lg",transition:{type:"spring",stiffness:350,damping:30}}),t.jsxs("div",{className:"relative flex items-center w-full h-full px-4\n                "+(x?"text-indigo-600 dark:text-indigo-400":"group-hover:text-slate-800 dark:group-hover:text-white"),children:[t.jsx(d,{name:s,size:20,strokeWidth:x?2.5:2}),t.jsx(a,{children:!o&&t.jsx(r.span,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10},transition:{duration:.2,delay:.1},className:"ml-3 truncate",children:n})})]})]})};function _({user:e,collapsed:l,setCollapsed:i,isMobile:n=!1,DynamicLucideIcon:o,visibleNavLinks:d}){return t.jsx("aside",{className:"sticky top-0 h-screen flex-shrink-0 transition-all duration-300 ease-in-out "+(n?"w-full":l?"w-22":"w-64"),children:t.jsx("div",{className:"p-3 h-full",children:t.jsxs("div",{className:"bg-white dark:bg-slate-900 shadow-lg rounded-2xl flex flex-col h-full",children:[t.jsx("div",{className:"flex items-center h-20 flex-shrink-0 px-4 overflow-hidden border-b border-slate-200/80 dark:border-slate-800 "+(l&&!n?"justify-center":""),children:t.jsx(s,{isNavigable:!0,isCollapsed:l})}),t.jsx("nav",{className:"flex-grow px-2 py-4 space-y-1 overflow-y-auto",children:d.map(e=>t.jsx(T,{...e,collapsed:l,DynamicLucideIcon:o},e.to))}),!n&&t.jsx("div",{className:"px-2 py-3 border-t border-slate-200/80 dark:border-slate-800",children:t.jsxs("button",{onClick:()=>i(!l),className:"flex items-center w-full h-11 px-4 text-slate-500 dark:text-slate-400 hover:text-slate-800 dark:hover:text-white rounded-lg group",children:[t.jsx(o,{name:l?"PanelRightOpen":"PanelLeftClose",size:20}),t.jsx(a,{children:!l&&t.jsx(r.span,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10},transition:{duration:.2,delay:.1},className:"ml-3 truncate font-medium",children:"Collapse"})})]})})]})})})}const z=({to:e,icon:s,label:a,DynamicLucideIcon:i})=>{const n=l(),d="/dashboard"===e&&n.pathname===e||"/dashboard"!==e&&n.pathname.startsWith(e);return t.jsxs(o,{to:e,className:"group relative flex items-center px-4 py-2 text-sm rounded-lg transition-colors duration-200\n                "+(d?"font-semibold":"font-medium text-slate-500 dark:text-slate-400 hover:bg-slate-200/50 dark:hover:bg-slate-800/60"),children:[d&&t.jsx(r.div,{layoutId:"active-nav-badge",className:"absolute inset-0 bg-white dark:bg-slate-800 border border-slate-200/80 dark:border-slate-700 shadow-md rounded-lg",transition:{type:"spring",stiffness:350,damping:30}}),t.jsxs("div",{className:"relative z-10 flex items-center\n                "+(d?"text-indigo-600 dark:text-indigo-400":"group-hover:text-slate-800 dark:group-hover:text-white"),children:[t.jsx(i,{name:s,size:18,className:"mr-2"}),a]})]})},A=({to:e,iconName:s,children:a,DynamicLucideIcon:r})=>t.jsx(o,{to:e,className:"group relative inline-flex items-center justify-center overflow-hidden rounded-lg bg-gradient-to-tr from-purple-600 to-indigo-600 p-0.5 text-sm font-semibold text-white shadow-lg transition-all duration-300 hover:shadow-cyan-500/40",children:t.jsxs("span",{className:"relative flex items-center gap-2 px-4 py-2 transition-all duration-200 bg-slate-900 rounded-md group-hover:bg-slate-800",children:[t.jsx(r,{name:s,size:16})," ",a]})});function R({DynamicLucideIcon:a,visibleNavLinks:l=[]}){const{user:i}=n(),[o,d]=e.useState(!1);return e.useEffect(()=>{const e=()=>{d(window.scrollY>10)};return window.addEventListener("scroll",e,{passive:!0}),()=>window.removeEventListener("scroll",e)},[]),t.jsx("header",{className:"sticky top-0 z-40 p-2 w-full",children:t.jsxs(r.div,{layout:!0,transition:{type:"spring",stiffness:300,damping:30},className:`\n          flex items-center justify-between p-2 rounded-2xl\n          max-w-8xl mx-12 transition-all duration-300\n          ${o?"bg-white/70 dark:bg-slate-900/70 backdrop-blur-xl shadow-lg border border-slate-200/50 dark:border-slate-700/50":"bg-transparent border border-transparent"}\n        `,children:[t.jsxs("div",{className:"flex items-center gap-6",children:[t.jsx(s,{isNavigable:!0,showTags:!1,isCollapsed:o}),t.jsx("nav",{className:"hidden md:flex items-center gap-1.5",children:l.map(e=>t.jsx(z,{...e,DynamicLucideIcon:a},e.to))})]}),t.jsx("div",{className:"hidden md:flex items-center pr-2",children:"superadmin"===i.role&&t.jsx(A,{to:"/admin/manage",iconName:"ShieldCheck",DynamicLucideIcon:a,children:"Admin Panel"})})]})})}const S=({user:e,onLogout:s,navMode:a,setNavMode:l,onClose:n,DynamicLucideIcon:o})=>t.jsxs(r.div,{initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},transition:{type:"spring",stiffness:400,damping:25},className:"absolute top-full right-0 mt-2 w-64 origin-top-right bg-white/80 dark:bg-slate-800/80 backdrop-blur-xl shadow-2xl rounded-xl border border-slate-900/10 dark:border-white/10",children:[t.jsxs("div",{className:"p-3 border-b border-slate-200/70 dark:border-slate-700/70",children:[t.jsx("p",{className:"text-sm font-semibold text-slate-800 dark:text-slate-100 truncate",children:e?.name}),t.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 truncate",children:e?.email})]}),t.jsxs("div",{className:"p-1.5 space-y-1",children:[t.jsxs(i,{to:"/profile",onClick:n,className:"flex items-center w-full px-3 py-2 text-sm text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg transition-colors",children:[t.jsx(o,{name:"SquareUser",size:16,className:"mr-3 text-slate-500 dark:text-slate-400"})," ","Profile"]}),t.jsxs(i,{to:"/settings",onClick:n,className:"flex items-center w-full px-3 py-2 text-sm text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg transition-colors",children:[t.jsx(o,{name:"Settings",size:16,className:"mr-3 text-slate-500 dark:text-slate-400"})," ","Settings"]})]}),t.jsxs("div",{className:"border-t border-slate-200/70 dark:border-slate-700/70 pt-1.5 mx-1.5",children:[t.jsxs("div",{className:"hidden lg:flex items-center justify-between px-3 py-2",children:[t.jsx("span",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Layout"}),t.jsxs("div",{className:"flex justify-around p-1 bg-slate-100 dark:bg-slate-800 rounded-lg",children:[t.jsx("button",{onClick:()=>l("vertical"),title:"Vertical Layout",className:"p-2 rounded-md transition-colors "+("vertical"===a?"bg-white dark:bg-sky-500/30 text-sky-600 dark:text-sky-200 shadow-sm":"hover:bg-slate-200/70 dark:hover:bg-slate-700/50 text-slate-500 dark:text-slate-400"),children:t.jsx(o,{name:"PanelLeft",size:18})}),t.jsx("button",{onClick:()=>l("horizontal"),title:"Horizontal Layout",className:"p-2 rounded-md transition-colors "+("horizontal"===a?"bg-white dark:bg-sky-500/30 text-sky-600 dark:text-sky-200 shadow-sm":"hover:bg-slate-200/70 dark:hover:bg-slate-700/50 text-slate-500 dark:text-slate-400"),children:t.jsx(o,{name:"LayoutGrid",size:18})})]})]}),t.jsxs("div",{className:"flex items-center justify-between px-3 py-2",children:[t.jsx("span",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Theme"}),t.jsx("div",{className:"p-1 rounded-lg",children:t.jsx(b,{})})]})]}),t.jsx("div",{className:"p-1.5",children:t.jsxs("button",{onClick:()=>{n&&n(),s()},className:"w-full text-left flex items-center px-3 py-2 text-sm font-semibold text-red-600 dark:text-red-400 hover:bg-red-500/10 rounded-lg transition-colors",children:[t.jsx(o,{name:"LogOut",size:16,className:"mr-3"})," Logout"]})})]}),D={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_BASE_URL:"https://pxlcartapi.azurewebsites.net/api",VITE_APP_CLIENT_URL:"https://pxlcart.azurewebsites.net/",VITE_APP_NAME:"pxlCart",VITE_EXPORT_MODE:"client",VITE_FEATURE_AI_EDITOR:"false",VITE_FEATURE_BATCH:"false",VITE_FEATURE_DASHBOARD:"true",VITE_FEATURE_ORDERS:"true",VITE_FEATURE_SUBSCRIPTIONS:"true",VITE_FEATURE_TEMPLATES:"true",VITE_USER_NODE_ENV:"production"},P=(t,s)=>{const[a,r]=e.useState(()=>{try{const e=localStorage.getItem(t);return e?JSON.parse(e):s}catch{return s}});return e.useEffect(()=>{try{localStorage.setItem(t,JSON.stringify(a))}catch(e){}},[t,a]),[a,r]},O=({name:e,...s})=>{const a=v[e];return a?t.jsx(a,{...s}):t.jsx(y,{...s})},M=()=>t.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 z-50 overflow-hidden bg-indigo-500/20",children:t.jsx(r.div,{className:"h-full bg-indigo-500",initial:{x:"-100%"},animate:{x:"0%"},transition:{duration:.5,ease:"circOut",repeat:1/0,repeatType:"loop"}})}),U=({onClose:e})=>{const{notifications:s,isLoading:a,markAsRead:l,unreadCount:n,markAllAsRead:o}=d(),c=m(),x={ORDER_UPDATE:t.jsx(u,{className:"text-blue-500",size:20}),BATCH_JOB_COMPLETE:t.jsx(w,{className:"text-green-500",size:20}),SUBSCRIPTION_ISSUE:t.jsx(N,{className:"text-orange-500",size:20}),BATCH_JOB_FAILED:t.jsx(N,{className:"text-red-500",size:20}),NEW_FEATURE:t.jsx(j,{className:"text-purple-500",size:20}),default:t.jsx(f,{className:"text-slate-500",size:20})};return t.jsxs(r.div,{initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},transition:{type:"spring",stiffness:400,damping:25},className:"absolute top-full right-0 mt-2 w-80 sm:w-96 origin-top-right bg-white/80 dark:bg-slate-800/80 backdrop-blur-xl shadow-2xl rounded-xl border border-slate-900/10 dark:border-white/10 z-50 overflow-hidden",children:[t.jsxs("header",{className:"p-4 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center",children:[t.jsx("h3",{className:"font-semibold text-slate-800 dark:text-white",children:"Notifications"}),n>0&&t.jsx("button",{onClick:o,className:"text-xs text-sky-500 hover:underline",children:"Mark all as read"})]}),t.jsx("div",{className:"max-h-96 overflow-y-auto",children:a?t.jsx(k,{}):0===s.length?t.jsx("p",{className:"p-10 text-center text-slate-500 text-sm",children:"You have no new notifications."}):s.slice(0,7).map(s=>t.jsxs("div",{onClick:()=>(async t=>{t.read||await l(t._id),t.link&&c(t.link),e()})(s),className:"flex items-start p-3 gap-3 border-b border-slate-100 dark:border-slate-700 last:border-b-0 cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[!s.read&&t.jsx("div",{className:"w-2 h-2 mt-2 rounded-full bg-sky-500 shrink-0"}),t.jsx("div",{className:"shrink-0 "+(s.read?"ml-2":""),children:x[s.type]||x.default}),t.jsx("div",{className:"flex-grow",children:t.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-200",children:s.message})})]},s._id))}),t.jsx("footer",{className:"p-2 bg-slate-50 dark:bg-slate-900/50 border-t border-slate-200 dark:border-slate-700",children:t.jsx(i,{to:"/notifications",onClick:e,className:"block text-center text-sm font-semibold text-sky-600 hover:text-sky-700 dark:text-sky-400 dark:hover:text-sky-300",children:"View All Notifications"})})]})},V=()=>t.jsx("footer",{className:"w-full text-xs text-slate-500 dark:text-slate-400 py-4 border-t border-slate-200 dark:border-slate-800 mt-auto",children:t.jsx("div",{className:"w-full flex items-center justify-end px-4 sm:px-6 lg:px-8",children:t.jsx("p",{className:"text-right",children:"© 2025 pxlCart. All rights reserved."})})}),F=()=>{const{user:s,logout:i}=n(),[o,m]=e.useState(!1),u=l(),{unreadCount:b}=d(),{isDarkMode:v}=h(),[j,y]=P("navMode","vertical"),[N,w]=P("sidebarCollapsed",!1),[E,L]=e.useState(!1),[C,T]=e.useState(!1),[z,A]=e.useState(!1),F=e.useRef(null),B=e.useRef(null),H=e.useRef(null);e.useEffect(()=>{const e=F.current;if(!e||!v)return;const t=t=>{const s=e.getBoundingClientRect();e.style.setProperty("--mouse-x",t.clientX-s.left+"px"),e.style.setProperty("--mouse-y",t.clientY-s.top+"px")};return e.addEventListener("mousemove",t),()=>e.removeEventListener("mousemove",t)},[v]),e.useEffect(()=>{m(!0);const e=setTimeout(()=>m(!1),400);return()=>clearTimeout(e)},[u.pathname]),e.useEffect(()=>{L(!1),T(!1),A(!1)},[u.pathname]);const J=e.useCallback(()=>L(e=>!e),[]);I(B,()=>T(!1)),I(H,()=>A(!1));const W=e.useMemo(()=>c.filter(e=>!e.featureFlag||"true"===D[e.featureFlag]),[]);return s?t.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-950 font-sans text-slate-800 dark:text-slate-200 transition-colors duration-300",children:[t.jsxs("header",{className:"fixed top-4 right-4 z-[101] flex items-center gap-2",children:[t.jsxs("div",{ref:H,className:"relative",children:[t.jsxs("button",{onClick:()=>{T(!1),A(e=>!e)},className:"relative p-2.5 rounded-full text-slate-500 hover:text-slate-900 dark:text-slate-400 dark:hover:text-white bg-white/70 dark:bg-slate-900/70 backdrop-blur-xl shadow-lg border border-slate-200/50 dark:border-slate-700/50",children:[t.jsx(f,{size:14}),b>0&&t.jsx("span",{className:"absolute top-1.5 right-1.5 h-2 w-2 rounded-full bg-red-500"})]}),t.jsx(a,{children:z&&t.jsx(U,{onClose:()=>A(!1)})})]}),t.jsxs("div",{ref:B,className:"relative",children:[t.jsx("button",{onClick:()=>{A(!1),T(e=>!e)},className:"h-8 w-8 rounded-full flex items-center justify-center bg-white/70 dark:bg-slate-900/70 backdrop-blur-xl shadow-lg border border-slate-200/50 dark:border-slate-700/50 overflow-hidden",children:t.jsx(p,{name:s.name,size:"h-10 w-10"})}),t.jsx(a,{children:C&&t.jsx(S,{user:s,onLogout:i,navMode:j,setNavMode:y,onClose:()=>T(!1),DynamicLucideIcon:O})})]}),t.jsx("button",{onClick:J,className:"md:hidden p-2.5 rounded-full text-slate-500 bg-white/70 dark:bg-slate-900/70 backdrop-blur-xl shadow-lg border border-slate-200/50 dark:border-slate-700/50",children:t.jsx(g,{size:20})})]}),t.jsxs("div",{className:"flex",children:["vertical"===j&&t.jsx("div",{className:"hidden md:block flex-shrink-0",children:t.jsx(_,{user:s,collapsed:N,setCollapsed:w,DynamicLucideIcon:O,visibleNavLinks:W})}),t.jsxs("div",{ref:F,className:"flex flex-col flex-grow w-full min-w-0 relative",children:[v&&t.jsx("div",{className:"pointer-events-none absolute -inset-px transition-opacity duration-300",style:{background:"radial-gradient(600px circle at var(--mouse-x) var(--mouse-y), rgba(148, 163, 184, 0.1), transparent 80%)"}}),"horizontal"===j&&t.jsx(R,{DynamicLucideIcon:O,visibleNavLinks:W}),t.jsx(a,{children:o&&t.jsx(M,{})}),t.jsxs("main",{className:"flex-grow sm:pr-6 sm:pl-6 flex flex-col",children:[t.jsx("div",{className:"flex-grow",children:t.jsx(a,{mode:"wait",children:t.jsx(r.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},children:t.jsx(x,{context:{user:s}})},u.pathname)})}),t.jsx(V,{})]})]})]}),t.jsx(a,{children:E&&t.jsxs(r.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"md:hidden fixed inset-0 z-[100]",children:[t.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm",onClick:J}),t.jsx(r.div,{initial:{x:"-100%"},animate:{x:"0%"},exit:{x:"-100%"},className:"relative w-full max-w-xs h-full bg-slate-100 dark:bg-slate-950",children:t.jsx(_,{user:s,collapsed:!1,isMobile:!0,DynamicLucideIcon:O,visibleNavLinks:W})})]})})]}):t.jsx(k,{})};export{F as default};
