import{r as e,b as t,j as s,H as a,L as r,I as l,K as i,e as n,Q as o,T as c,m as d}from"./index-CxscT09Y.js";import{u as m}from"./useDarkMode-uytT8DPn.js";import{G as x}from"./GradientButton-BmUonBY4.js";import{T as p,S as u}from"./SneakPeekPreview-B0vwDacu.js";import{b as f,U as h,a as j}from"./x-C-WXaDeE.js";import{g,h as y}from"./lucide-react-Dm8ijxDf.js";import{f as b}from"./formatDistanceToNow-CR5Q7sOX.js";import"./index-Dg0Qh9jE.js";import"./TemplateRenderer-DboS4ZpZ.js";import"./index-C08PnImj.js";import"./zoom-out-BkmDqjxf.js";import"./PaymentModal-BQ985snT.js";import"./server.browser-BDVDZUy1.js";import"./zap-C1hV3rjf.js";import"./getRoundingMethod-DTdSz1j7.js";import"./en-US-DXcIbJEK.js";const v="relative p-6 rounded-2xl shadow-xl transition-all duration-300 backdrop-blur-lg animate-card-fade-in bg-white/60 border border-slate-200/70 dark:bg-slate-800/50 dark:border-white/10",N=({user:e})=>{const t=n();return s.jsxs("header",{className:"flex flex-col sm:flex-row justify-between items-center gap-4 animate-fade-in",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(o,{size:44,className:"text-cyan-500 dark:text-cyan-400"}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-4xl font-bold tracking-tight text-slate-900 dark:text-white",children:"Dashboard"}),s.jsxs("p",{className:"text-slate-500 dark:text-slate-400 mt-1",children:["Welcome back, ",e?.name||"User",". Here's your command center."]})]})]}),s.jsx(x,{onClick:()=>t("/editor"),iconName:"Plus",size:"md",children:"New Design"})]})},k=({title:t,value:a,icon:r,chartData:l,color:i,delay:n,isCurrency:o=!1})=>{const{count:x,ref:p}=((t,s=1500)=>{const[a,r]=e.useState(0),l=e.useRef(null);return e.useEffect(()=>{const e=new IntersectionObserver(([a])=>{if(a.isIntersecting){let a=0;if(isNaN(t))return void r(t);const l=parseInt(String(t).replace(/,/g,""),10);if(a===l)return void r(l);const i=Date.now(),n=()=>{const e=Date.now(),t=Math.min((e-i)/s,1),a=Math.floor(t*l);r(a),t<1?requestAnimationFrame(n):r(l)};requestAnimationFrame(n),e.disconnect()}},{threshold:.1});return l.current&&e.observe(l.current),()=>e.disconnect()},[t,s]),{count:a,ref:l}})(o?parseFloat(a||0):a||0),u=e.useRef(null),{isDarkMode:f}=m();e.useEffect(()=>{const e=u.current;if(!e)return;const t=t=>{const s=e.getBoundingClientRect();e.style.setProperty("--mouse-x",t.clientX-s.left+"px"),e.style.setProperty("--mouse-y",t.clientY-s.top+"px")};return e.addEventListener("mousemove",t),()=>e.removeEventListener("mousemove",t)},[]);const h=o?`${c}${x.toLocaleString()}`:"number"==typeof x?x.toLocaleString():x;return s.jsxs("div",{ref:u,className:`${v} group flex flex-col h-full`,style:{animationDelay:100*n+"ms"},children:[s.jsx("div",{className:"dashboard-card-glow",style:{"--glow-color":i}}),s.jsxs("div",{className:"relative z-10 flex flex-col h-full",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 rounded-lg",style:{background:`linear-gradient(135deg, ${i}${f?"33":"88"}, ${i}${f?"1A":"44"})`},children:r}),s.jsx("p",{className:"font-medium text-slate-600 dark:text-slate-300",children:t})]}),s.jsx("p",{ref:p,className:"mt-4 text-4xl font-bold tracking-tight text-slate-900 dark:text-white",children:h}),s.jsx("div",{className:"flex-grow mt-3 mb-1 flex items-end",children:l&&s.jsxs("svg",{viewBox:"0 0 100 25",className:"w-full h-full",preserveAspectRatio:"none",children:[s.jsx(d.path,{d:`M0,25 ${l.map((e,t)=>`L${t/(l.length-1)*100},${25-e}`).join(" ")} L100,25 Z`,fill:`url(#gradient-${i.replace("#","")})`,initial:{pathLength:0,opacity:0},animate:{pathLength:1,opacity:1},transition:{duration:1.5,ease:"easeInOut",delay:.1*n+.5}}),s.jsx("defs",{children:s.jsxs("linearGradient",{id:`gradient-${i.replace("#","")}`,x1:"0",y1:"0",x2:"0",y2:"100%",children:[s.jsx("stop",{offset:"0%",stopColor:i,stopOpacity:f?"0.3":"0.5"}),s.jsx("stop",{offset:"100%",stopColor:i,stopOpacity:"0"})]})})]})})]})]})},w=({planInfo:e})=>s.jsxs("div",{className:`${v} flex flex-col justify-center`,style:{animationDelay:"250ms"},children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"font-semibold text-slate-800 dark:text-slate-200 text-lg",children:"Your Plan"}),s.jsx(r,{to:"/subscriptions",className:"text-sm font-medium text-cyan-600 dark:text-cyan-400 hover:underline",children:"Upgrade"})]}),s.jsx("p",{className:"text-3xl font-bold text-slate-900 dark:text-white mt-2",children:e.name}),s.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:e.renewsOn?`Renews on ${new Date(e.renewsOn).toLocaleDateString()}`:"Lifetime Access"})]}),D=()=>s.jsxs("div",{className:"relative rounded-2xl p-8 overflow-hidden bg-gradient-to-br from-cyan-400/80 to-blue-600/80 dark:from-cyan-500/50 dark:to-blue-600/50 shadow-2xl animate-fade-in",style:{animationDelay:"200ms"},children:[s.jsx("div",{className:"absolute -inset-4 opacity-20 dark:opacity-10",style:{backgroundImage:"url('https://www.transparenttextures.com/patterns/az-subtle.png')"}}),s.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row items-center justify-between gap-6",children:[s.jsxs("div",{className:"text-center md:text-left",children:[s.jsx("h2",{className:"text-3xl font-bold text-white drop-shadow-lg",children:"Explore the Template Library"}),s.jsx("p",{className:"mt-2 text-blue-100 max-w-lg",children:"Access hundreds of professionally designed templates to kickstart your next project instantly."})]}),s.jsxs(r,{to:"/templates",className:"group shrink-0 relative inline-flex items-center justify-center px-8 py-3 text-sm font-bold text-slate-900 bg-white rounded-lg shadow-xl hover:bg-slate-200 transition-all transform hover:scale-105",children:[s.jsx(y,{size:18,className:"mr-2 transition-transform duration-300 group-hover:-translate-y-0.5 group-hover:translate-x-0.5 group-hover:rotate-12"}),"Browse Library"]})]})]}),$=({data:t,total:a,delay:r})=>{const{isDarkMode:l}=m(),i=150,n=2*Math.PI*67,o=["#38bdf8","#34d399","#a78bfa","#f59e0b","#ec4899"],c=e.useMemo(()=>{let e=0;return t.map((t,s)=>{const r=a>0?t.count/a*100:0,l=e/a*360;return e+=t.count,{...t,percentage:r,dashoffset:n*(1-r/100),rotation:l,color:o[s%o.length]}})},[t,a,n]);return s.jsxs("div",{className:`${v} flex flex-col h-full`,style:{animationDelay:100*r+"ms"},children:[s.jsx("h3",{className:"font-semibold text-lg text-slate-800 dark:text-slate-200",children:"My Creations"}),s.jsxs("div",{className:"flex-grow flex items-center justify-center gap-4 mt-2 group",style:{minHeight:i},children:[s.jsxs("div",{className:"relative",style:{width:i,height:i},children:[s.jsxs("svg",{width:i,height:i,viewBox:"0 0 150 150",className:"-rotate-90",children:[s.jsx("circle",{cx:75,cy:75,r:67,fill:"none",stroke:l?"#475569":"#cbd5e1",strokeWidth:16}),c.map((e,t)=>s.jsx(d.circle,{cx:75,cy:75,r:67,fill:"none",stroke:e.color,strokeWidth:16,strokeDasharray:n,strokeDashoffset:n,style:{transform:`rotate(${e.rotation}deg)`,transformOrigin:"50% 50%"},animate:{strokeDashoffset:e.dashoffset},transition:{duration:1,ease:"easeOut",delay:.5+.1*t},strokeLinecap:"round"},t))]}),s.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[s.jsx("span",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:a}),s.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Total"})]})]}),s.jsx("div",{className:"space-y-1 w-full sm:w-auto opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:c.map(({label:e,count:t,color:a})=>s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx("div",{className:"w-3 h-3 rounded-sm",style:{backgroundColor:a}}),s.jsx("span",{className:"text-slate-700 dark:text-slate-300 capitalize",children:e.replace(/_/g," ")}),s.jsx("span",{className:"ml-auto font-mono text-slate-500 dark:text-slate-400",children:t})]},e))})]})]})},z=({title:e,link:t,icon:a,items:l,emptyText:i,renderItem:n})=>s.jsxs("div",{className:`${v} h-full`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("h3",{className:"font-semibold text-slate-800 dark:text-slate-200 text-lg flex items-center gap-2",children:[a," ",e]}),s.jsx(r,{to:t,className:"text-sm font-medium text-cyan-600 dark:text-cyan-400 hover:underline",children:"View All"})]}),s.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto custom-scrollbar pr-2 -mr-2",children:l.length>0?l.map(n):s.jsx("p",{className:"text-center text-sm text-slate-500 py-4",children:i})})]}),I=()=>{const[n,o]=e.useState(null),[c,d]=e.useState([]),[x,y]=e.useState(!0),{user:I,currentUserPlan:M}=t(),{isDarkMode:S}=m(),[L,T]=e.useState(null),A=e.useCallback(e=>T(e),[]),O=e.useCallback(()=>T(null),[]);e.useEffect(()=>{(async()=>{y(!0);try{const[e,t]=await Promise.all([l(),i({isFeatured:!0,limit:5})]);o(e),d(Array.isArray(t.templates)?t.templates:[])}catch(e){}finally{y(!1)}})()},[]);const P=n?.kpis||{},{recentActivity:C,planInfo:R}=n||{},{templates:B=[],orders:E=[],batchJobs:U=[]}=C||{},F=P.myTemplates||0,Y=e.useMemo(()=>{if(!B)return[];const e=B.reduce((e,t)=>(e[t.type]=(e[t.type]||0)+1,e),{});return Object.entries(e).map(([e,t])=>({label:e,count:t})).sort((e,t)=>t.count-e.count)},[B]),q=[{key:"templates",title:"My Templates",value:P.myTemplates,icon:s.jsx(a,{size:20,className:"text-cyan-500"}),color:"#06b6d4",chartData:[5,8,6,10,7,12,10]},{key:"orders",title:"Total Orders",value:P.myOrders,icon:s.jsx(f,{size:20,className:"text-rose-500"}),color:"#f43f5e",chartData:[12,15,9,17,13,18,16]},{key:"users",title:"Team Members",value:P.teamMembers,icon:s.jsx(h,{size:20,className:"text-amber-500"}),color:"#f59e0b",chartData:[3,5,2,6,4,8,5]}].filter(Boolean);return s.jsxs("div",{className:"min-h-screen bg-slate-100 dark:bg-slate-950 font-sans text-slate-800 dark:text-slate-200 transition-colors duration-300",style:{backgroundImage:`\n      radial-gradient(circle at var(--mouse-x) var(--mouse-y), ${S?"rgba(6, 182, 212, 0.1)":"rgba(56, 189, 248, 0.15)"}, transparent 40vw),\n      linear-gradient(to bottom, transparent 85%, ${S?"#0f172a":"#f1f5f9"} 100%)\n    `,backgroundBlendMode:"normal"},children:[s.jsxs("div",{className:"p-4 sm:p-6 md:p-8 space-y-8",children:[s.jsx(N,{user:I}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[q.map((e,t)=>s.jsx(k,{...e,delay:t},e.key)),s.jsx($,{data:Y,total:F,delay:q.length})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-8",children:[s.jsx("div",{className:"lg:col-span-3",children:s.jsxs("div",{className:`${v} h-full`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"font-semibold text-slate-800 dark:text-slate-200 text-lg",children:"Start with a Template"}),s.jsxs(r,{to:"/templates",className:"text-sm font-medium text-cyan-600 dark:text-cyan-400 hover:underline flex items-center gap-1",children:["Browse Full Library ",s.jsx(j,{size:16})]})]}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-6",children:x?Array.from({length:3}).map((e,t)=>s.jsx("div",{className:"aspect-[3/4] bg-slate-200 dark:bg-slate-800 rounded-xl animate-pulse"},t)):c.slice(0,3).map((e,t)=>s.jsx(p,{template:e,index:t,onPreviewIconClick:A},e.id))})]})}),s.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[R&&s.jsx(w,{planInfo:R}),s.jsx(D,{})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[s.jsx(z,{title:"Recent Activity",link:"/templates",icon:s.jsx(g,{size:16}),emptyText:"No recent template activity.",items:B,renderItem:e=>s.jsxs("div",{className:"flex items-center gap-3 p-2",children:[s.jsx("div",{className:"p-2 bg-slate-200 dark:bg-slate-800 rounded-full text-cyan-500",children:s.jsx(g,{size:16})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-sm",children:e.name}),s.jsxs("p",{className:"text-xs text-slate-500",children:["Edited ",b(new Date(e.updatedAt),{addSuffix:!0})]})]})]},e.id)}),s.jsx(z,{title:"Recent Orders",link:"/orders",icon:s.jsx(f,{size:16}),emptyText:"No recent orders.",items:E,renderItem:e=>s.jsxs("div",{className:"flex items-center gap-3 p-2",children:[s.jsx("div",{className:"p-2 bg-slate-200 dark:bg-slate-800 rounded-full text-rose-500",children:s.jsx(f,{size:16})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-sm",children:e.itemNameSummary}),s.jsxs("p",{className:"text-xs text-slate-500",children:["Ordered ",b(new Date(e.createdAt),{addSuffix:!0})]})]})]},e.orderId)})]}),!1]}),s.jsx(u,{templateId:L,currentUserPlan:M,onClose:O}),s.jsx("style",{children:`.dashboard-card-glow { pointer-events: none; position: absolute; inset: -1px; border-radius: 1.25rem; background: radial-gradient(350px circle at var(--mouse-x) var(--mouse-y), var(--glow-color), transparent 40%); opacity: 0; transition: opacity 0.4s ease; } .group:hover .dashboard-card-glow { opacity: ${S?"0.15":"0.25"}; } .custom-scrollbar::-webkit-scrollbar { width: 5px; } .custom-scrollbar::-webkit-scrollbar-track { background: transparent; } .custom-scrollbar::-webkit-scrollbar-thumb { background: ${S?"#475569":"#cbd5e1"}; border-radius: 5px; } .custom-scrollbar::-webkit-scrollbar-thumb:hover { background: ${S?"#64748b":"#a0aec0"}; } @keyframes card-fade-in { to { opacity: 1; transform: translateY(0); } } .animate-card-fade-in { opacity: 0; transform: translateY(20px); animation: card-fade-in 0.8s ease-out forwards; } @keyframes fade-in { from { opacity: 0; } to { opacity: 1; } } .animate-fade-in { animation: fade-in 1s ease-out forwards; opacity: 0; }`})]})};export{I as default};
