import{e,V as t,r as s,b as a,Y as i,j as l,m as r,a as n,R as d,S as o,Z as c,_ as x}from"./index-CxscT09Y.js";import{V as m}from"./index-Dg0Qh9jE.js";import{T as h}from"./TemplateRenderer-DboS4ZpZ.js";import{u}from"./useDarkMode-uytT8DPn.js";import{L as p,M as g}from"./zoom-out-BkmDqjxf.js";import{G as f,E as b,q as j,T as v,r as y,s as w,t as k,u as N,g as z,v as P}from"./lucide-react-Dm8ijxDf.js";import{c as S,X as C,a as $,d as M}from"./x-C-WXaDeE.js";import{P as I}from"./PaymentModal-BQ985snT.js";import{A as T,I as O}from"./zap-C1hV3rjf.js";const R=d.memo(({template:e,templateSize:t,pageIndex:s=0,side:a="front",containerWidth:i,containerHeight:r})=>{const{isDarkMode:n}=u();if(!e||!i||!r||0===i)return l.jsx("div",{className:"w-full h-full flex items-center justify-center bg-slate-200 dark:bg-slate-800"});const d=e.design.pages[s];if(!d)return l.jsx("div",{className:"flex items-center justify-center w-full h-full bg-slate-100 text-xs p-2",children:"Page Unavailable"});const o=d[a]||d.front;if(!o)return l.jsx("div",{className:"flex items-center justify-center w-full h-full bg-slate-100 text-xs p-2",children:"Side Unavailable"});const c=o.elements||[],x=Math.min(i/t.width,r/t.height),m={width:`${t.width*x}px`,height:`${t.height*x}px`,position:"relative",overflow:"hidden",borderRadius:"inherit"},p={position:"absolute",top:0,left:0,transform:`scale(${x})`,transformOrigin:"top left"};return l.jsx("div",{style:m,children:l.jsx("div",{style:p,children:l.jsx(h,{elements:c,pageSide:o,width:t.width,height:t.height,theme:n?"dark":"light"})})})}),U=({template:e})=>{const a=e.design.pages||[],[i,d]=s.useState(0),[o,c]=(()=>{const[e,t]=s.useState({width:0,height:0}),a=s.useRef(null);return s.useEffect(()=>{const e=a.current;if(!e)return;const s=new ResizeObserver(e=>{if(e[0]){const{width:s,height:a}=e[0].contentRect;t({width:s,height:a})}});return s.observe(e),()=>{e&&s.unobserve(e)}},[]),[a,e]})(),{sizePresets:x}=t(),[m,h]=s.useState({width:800,height:600});return s.useEffect(()=>{if(a.length<=1)return;const e=setInterval(()=>d(e=>(e+1)%a.length),2500);return()=>clearInterval(e)},[a.length]),s.useEffect(()=>{if(!x||0===x.length)return;const t=x.find(t=>t.id===e.defaultSizePreset);t&&h(t)},[x,e.defaultSizePreset]),l.jsx("div",{ref:o,className:"w-full h-full relative flex items-center justify-center overflow-hidden p-2",children:l.jsx(n,{initial:!1,children:l.jsx(r.div,{initial:{opacity:0,x:30},animate:{opacity:1,x:0},exit:{opacity:0,x:-30},transition:{duration:.5,ease:"easeInOut"},className:"absolute shadow-lg rounded-md",children:c.width>0&&l.jsx(R,{template:e,templateSize:m,pageIndex:i,containerWidth:c.width,containerHeight:c.height})},i)})})},F=({template:e,onHoverChange:t})=>{if(["Free","Subscription-Based"].includes(e.monetizationModel)||e.hasPurchased)return l.jsx("div",{className:"h-8"});const{onSale:s,price:a,salePrice:i}=e.pricing;return l.jsxs(r.div,{onMouseEnter:()=>t(!0),onMouseLeave:()=>t(!1),whileHover:{scale:1.05},transition:{type:"spring",stiffness:400,damping:15},className:"relative group p-px rounded-full cursor-pointer",style:{transition:"filter 0.3s ease-in-out"},children:[l.jsx("div",{className:"animated-gradient-border absolute inset-0 rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),l.jsxs("div",{className:"relative z-10 flex items-center gap-2 pl-2 pr-3 py-1 bg-slate-100 dark:bg-slate-900 rounded-full border border-slate-300 dark:border-slate-700 group-hover:border-transparent transition-colors duration-300",children:[l.jsx(v,{size:10,className:"text-slate-400 dark:text-slate-500 group-hover:text-cyan-500 transition-colors duration-300"}),s&&a!==i?l.jsxs(l.Fragment,{children:[l.jsxs("span",{className:"text-xs text-slate-400 dark:text-slate-400 line-through",children:["₹",a]}),l.jsxs("span",{className:"text-xs font-bold text-green-600 dark:text-green-400",children:["₹",i]})]}):l.jsxs("span",{className:"text-xs font-bold text-green-600 dark:text-green-400",children:["₹",a]})]}),l.jsx("style",{jsx:!0,global:!0,children:"\n        @property --angle {\n          syntax: '<angle>';\n          initial-value: 0deg;\n          inherits: false;\n        }\n        @keyframes rotate-gradient {\n          to { --angle: 360deg; }\n        }\n        .animated-gradient-border {\n          --angle: 0deg;\n          background: linear-gradient(var(--angle), #06b6d4, #3b82f6, #8b5cf6, #ec4899);\n          animation: rotate-gradient 4s linear infinite;\n        }\n        .group:hover {\n          filter: drop-shadow(0 0 4px rgba(59, 130, 246, 0.4));\n        }\n      "})]})},E=({template:e})=>l.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-30 p-4 pointer-events-none",children:l.jsxs(r.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.15,ease:"easeOut"},className:"w-50 h-20 bg-black/40 backdrop-blur-md rounded-lg flex flex-col items-center justify-center text-center p-4",children:[l.jsx("h4",{className:"font-bold capitalize text-lg text-blue-300 mb-1",children:e.monetizationModel.replace(/-/g," ")}),l.jsx("p",{className:"text-slate-200 text-sm",children:e.licenseType})]})}),H=({template:e,isOwner:t})=>l.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-3 bg-gradient-to-t from-black/90 via-black/70 to-transparent pointer-events-none z-10 rounded-b-xl",children:[l.jsx("h3",{className:"font-semibold text-base text-slate-100 text-shadow truncate",children:e.name}),l.jsxs("div",{className:"flex items-center justify-between mt-1.5",children:[l.jsxs("div",{className:"flex items-center gap-3 text-xs text-slate-300",children:[l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx(b,{size:12}),e.viewCount||0]}),l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx(S,{size:12,className:"fill-yellow-400 text-yellow-400"}),e.averageRating?.toFixed(1)||"N/A"]})]}),l.jsxs("div",{className:"text-xs text-slate-300 font-medium flex items-center gap-1",children:[e.isSystemTemplate?l.jsx(o,{size:12,className:"text-violet-400"}):l.jsx(j,{size:12}),l.jsx("span",{children:e?.isSystemTemplate?"System":e?.authorName?.trim()||"User"})]})]})]}),D=()=>l.jsx("div",{className:"absolute top-3 right-3 z-20 group",children:l.jsxs("div",{className:"flex items-center gap-1.5 pl-2 pr-3 py-1 text-white text-[11px] font-semibold uppercase bg-gradient-to-r from-cyan-500 to-blue-500 rounded-full shadow-md ring-1 ring-white/20",children:[l.jsx(f,{size:14}),l.jsx("span",{children:"Free"})]})}),B=({template:e,isDarkMode:t})=>{const s={Purchased:{text:"Owned",icon:l.jsx(w,{size:14,className:"text-green-300"}),gradient:"from-green-500 to-emerald-600"},Premium:{text:"Premium",icon:l.jsx(y,{size:12}),gradient:"from-purple-500 to-indigo-600"},Pro:{text:"Pro",icon:l.jsx(S,{size:12}),gradient:"from-sky-500 to-cyan-600"},Exclusive:{text:"Exclusive",icon:l.jsx(o,{size:12}),gradient:"from-pink-500 via-rose-500 to-amber-500"}};let a=null;if(e.hasPurchased?a="Purchased":["Premium","Pro","Exclusive"].includes(e.category)&&(a=e.category),!a)return null;const{text:i,icon:r,gradient:n}=s[a];return l.jsx("div",{className:`relative inline-flex items-center justify-center px-3 py-1.5 rounded-full font-bold uppercase tracking-wider text-white text-[10px] bg-gradient-to-br ${n} shadow-lg border border-white/20`,children:l.jsxs("div",{className:"flex items-center gap-1.5 z-10",children:[r,l.jsx("span",{children:i})]})})},A=({template:d,index:o,onPreviewIconClick:c})=>{const x=e(),{currentUserPlan:h}=t(),{isDarkMode:f}=u(),[b,j]=s.useState(!1),[v,y]=s.useState(!1),{user:w}=a(),k=(i[h]??0)>=(i[d.category]??0),N=w&&d.userId&&d.userId===w._id,z=d?.access?.hasPurchased||"Free"===d.monetizationModel||d.hasPurchased||"Subscription-Based"===d.monetizationModel&&k;return d?.id?l.jsxs(r.div,{layout:!0,variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{delay:.03*o}}},className:"relative rounded-xl aspect-[3/4] overflow-hidden cursor-pointer shadow-lg transition-all duration-300 bg-slate-200 group",onClick:e=>{e.preventDefault(),z?(m.success(`Opening ${d.name} in editor...`),x(`/editor/${d.id}`)):c(d.id)},onMouseEnter:()=>j(!0),onMouseLeave:()=>j(!1),whileHover:{y:-5,boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1)"},children:[l.jsx("div",{className:"absolute inset-0 flex flex-col transition-transform duration-500 ease-out "+(b?"scale-[1.05]":"scale-100"),children:l.jsx("div",{className:"flex-grow w-full h-full rounded-xl overflow-hidden relative bg-slate-100 dark:bg-slate-900",children:l.jsx(U,{template:d})})}),l.jsx(n,{children:v&&l.jsx(E,{template:d})}),l.jsx("div",{className:"absolute top-3 left-1 z-20",children:l.jsx(B,{template:d,isDarkMode:f})}),"Free"===d.monetizationModel&&!N&&l.jsx(D,{}),l.jsx(H,{template:d,isOwner:N}),l.jsx("div",{className:"absolute top-3 right-3 z-20",children:l.jsx(F,{template:d,onHoverChange:y})}),!z&&"Subscription-Based"===d.monetizationModel&&l.jsx("div",{className:"absolute inset-0 bg-black/30 flex items-center justify-center p-4 text-center rounded-xl",children:l.jsxs("div",{className:"relative rounded-xl overflow-hidden border border-white/20 shadow-2xl",children:[l.jsx("div",{className:"absolute inset-0 backdrop-blur-sm bg-white/10"}),l.jsxs("div",{className:"relative px-4 py-3 flex flex-col items-center gap-2 z-10",children:[l.jsx(p,{className:"text-yellow-400 w-8 h-8 drop-shadow-md mx-auto"}),l.jsx("span",{className:"text-sm font-extrabold bg-gradient-to-r from-sky-400 via-indigo-400 to-purple-400 text-transparent bg-clip-text animate-gradient",children:"Upgrade to use"}),l.jsxs("span",{className:"text-xs font-medium text-slate-200 mt-1 block",children:["Requires ",d.category," Plan"]})]})]})}),b&&l.jsx(n,{children:l.jsx(r.button,{initial:{opacity:0,scale:.7},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.7},transition:{duration:.2,ease:"easeOut"},type:"button",title:"Quick View","aria-label":`Quick view ${d.name}`,onClick:e=>{e.stopPropagation(),c(d.id)},className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-10 h-10 flex items-center justify-center bg-slate-900/70 backdrop-blur-sm text-white rounded-full border border-white/20 shadow-lg hover:bg-slate-900 transition-colors",children:l.jsx(g,{size:16,strokeWidth:2.5})})})]}):null},L=({onClick:e,icon:t,children:s,variant:a="primary",size:i="md",className:n=""})=>l.jsxs(r.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:e,className:`w-full flex items-center justify-center gap-3 font-bold text-white rounded-lg shadow-lg transition-all transform hover:scale-[1.03] hover:shadow-xl ${{md:"px-6 py-3 text-base",lg:"px-8 py-4 text-lg"}[i]} ${{primary:"bg-gradient-to-r from-cyan-500 to-sky-600 hover:shadow-cyan-500/30",purchase:"bg-gradient-to-r from-emerald-500 to-green-600 hover:shadow-emerald-500/30"}[a]} ${n}`,children:[t,s]}),W=({icon:e,title:t,children:s})=>l.jsxs("div",{className:"bg-slate-100 dark:bg-slate-800/50 rounded-xl p-4 border border-slate-200 dark:border-slate-700/50",children:[l.jsxs("h4",{className:"flex items-center gap-2 text-sm font-semibold text-slate-600 dark:text-slate-300 mb-2",children:[e,t]}),s]}),_=({label:e,value:t})=>l.jsxs("div",{className:"flex justify-between items-center text-xs",children:[l.jsx("span",{className:"text-slate-500 dark:text-slate-400",children:e}),l.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-200 text-right",children:t})]}),q=d.memo(({template:e,pageIndex:s,side:a,containerWidth:i,containerHeight:r})=>{const{sizePresets:n}=t(),{isDarkMode:d}=u();if(!e||!n||0===i||0===r)return l.jsx("div",{className:"w-full h-full flex items-center justify-center bg-slate-200 dark:bg-slate-800"});const o=e.design.pages[s];if(!o)return l.jsx("div",{className:"flex items-center justify-center w-full h-full bg-slate-100 text-xs p-2",children:"Page Unavailable"});const c=o[a]||o.front;if(!c)return l.jsx("div",{className:"flex items-center justify-center w-full h-full bg-slate-100 text-xs p-2",children:"Side Unavailable"});const x=o.sizePreset||e.defaultSizePreset,m=n.find(e=>e.id===x)||{width:400,height:300},p=c.elements||[],g=.95*Math.min(i/m.width,r/m.height),f={width:`${m.width*g}px`,height:`${m.height*g}px`,position:"relative",overflow:"hidden",borderRadius:"inherit"},b={position:"absolute",top:0,left:0,transform:`scale(${g})`,transformOrigin:"top left"};return l.jsx("div",{style:f,children:l.jsx("div",{style:b,children:l.jsx(h,{elements:p,pageSide:c,width:m.width,height:m.height,theme:d?"dark":"light"})})})}),V=({templateId:t,currentUserPlan:d,onClose:o})=>{const[h,u]=s.useState(null),[g,f]=s.useState(!0),[b,j]=s.useState(null),[y,w]=s.useState(0),[S,R]=s.useState("front"),[U,F]=s.useState(0),[E,H]=s.useState(!1),[D,B]=(()=>{const[e,t]=s.useState({width:0,height:0}),a=s.useRef(null);return[s.useCallback(e=>{if(a.current&&a.current.disconnect(),e){const s=new ResizeObserver(e=>{if(e[0]){const{width:s,height:a}=e[0].contentRect;t({width:s,height:a})}});s.observe(e),a.current=s}},[]),e]})(),A=e(),{user:V}=a(),[Q,Y]=s.useState();s.useEffect(()=>{if(!t)return u(null),void f(!1);let e=!1;f(!0),j(null);return(async()=>{try{const a=await c(t);e||(a?(u(a),w(0),Y(a.access),R("front"),s=t,sessionStorage.getItem(`viewed-${s}`)||x(t).then(()=>(e=>sessionStorage.setItem(`viewed-${e}`,"true"))(t))):j("Preview data could not be loaded."))}catch(a){e||j(a.message||"Could not load preview.")}finally{e||f(!1)}var s})(),()=>{e=!0}},[t]);const Z=async e=>(H(!1),e.success?(m.success(`${h.name} purchased successfully!`),u(e=>({...e,hasPurchased:!0})),setTimeout(()=>{A(`/editor/${h.id}`),o()},1500),!0):(m.error(e.message||"Purchase failed."),!1)),J=e=>{h&&(F(e),w(t=>(t+e+h.design.pages.length)%h.design.pages.length))};return l.jsx(n,{children:t&&l.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-40 flex items-center justify-center p-4",onClick:o,role:"dialog","aria-labelledby":"sneak-peek-title",children:l.jsx(r.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{duration:.25,ease:"easeOut"},onClick:e=>e.stopPropagation(),className:"relative bg-white dark:bg-slate-800 rounded-2xl shadow-2xl w-full max-w-5xl h-[90vh] flex items-center border border-slate-200 dark:border-slate-700",children:(()=>{if(g)return l.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-8",children:[l.jsx(k,{className:"animate-spin mb-4 text-sky-500",size:40}),l.jsx("span",{className:"text-lg font-medium text-slate-700 dark:text-slate-200",children:"Loading Preview..."})]});if(b||!h)return l.jsxs("div",{className:"relative flex flex-col items-center justify-center h-full text-center text-red-500 p-8",children:[l.jsx("button",{onClick:o,className:"absolute top-4 right-4 p-1.5 text-slate-500 hover:text-red-500 rounded-full hover:bg-red-500/10 transition-colors",children:l.jsx(C,{size:20})}),l.jsx(T,{className:"mb-4",size:40}),l.jsx("span",{className:"text-lg font-medium",children:"Preview Unavailable"}),l.jsx("span",{className:"text-sm text-slate-500 mt-1",children:b})]});const{category:e="Free",type:t="unknown",tags:s=[],averageRating:a,authorName:c,isSystemTemplate:x,design:m,monetizationModel:u,pricing:f,licenseType:j}=h,F=m.pages[y],V=!(!F.back||!(F.back.elements?.length>0||F.back.bgImage||F.back.bgColor||F.back.backgroundGradient)),Y=m.pages.length>1,K=(i[d]??0)>=(i[e]??0),X=Q?.hasPurchased||"Free"===u||"Subscription-Based"===u&&K,ee="One-Time Payment"===u&&!Q?.hasPurchased,te=Q?.hasPurchased&&"pending"===Q?.paymentStatus,se=()=>{X?(A(`/editor/${h.id}`),o()):"Subscription-Based"!==u||K?ee&&H(!0):A("/subscriptions")};return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex flex-col md:flex-row w-full h-full p-1 md:p-5 gap-6 overflow-hidden",children:[l.jsxs("div",{className:"w-full md:w-3/5 lg:w-7/12 flex flex-col rounded-xl bg-slate-100 dark:bg-slate-900/50 relative p-4",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4 flex-shrink-0",children:[l.jsx("button",{onClick:()=>J(-1),disabled:!Y,className:"p-2 rounded-full bg-black/10 hover:bg-black/20 text-slate-700 dark:text-white dark:bg-white/10 dark:hover:bg-white/20 transition disabled:opacity-30 disabled:cursor-not-allowed",children:l.jsx(N,{size:24})}),V&&l.jsxs("div",{className:"flex items-center bg-slate-200/80 dark:bg-slate-900/80 rounded-lg p-1",children:[l.jsx("button",{onClick:()=>R("front"),className:"px-4 py-1.5 text-sm font-semibold rounded-md transition-all "+("front"===S?"bg-white dark:bg-slate-700 text-sky-600 dark:text-sky-300 shadow-sm":"text-slate-600 dark:text-slate-300"),children:"Front"}),l.jsx("button",{onClick:()=>R("back"),className:"px-4 py-1.5 text-sm font-semibold rounded-md transition-all "+("back"===S?"bg-white dark:bg-slate-700 text-sky-600 dark:text-sky-300 shadow-sm":"text-slate-600 dark:text-slate-300"),children:"Back"})]}),l.jsx("button",{onClick:()=>J(1),disabled:!Y,className:"p-2 rounded-full bg-black/10 hover:bg-black/20 text-slate-700 dark:text-white dark:bg-white/10 dark:hover:bg-white/20 transition disabled:opacity-30 disabled:cursor-not-allowed",children:l.jsx($,{size:24})})]}),l.jsx("div",{ref:D,className:"w-full flex-grow flex items-center justify-center relative",children:l.jsx(n,{initial:!1,custom:U,children:l.jsx(r.div,{custom:U,variants:{enter:e=>({x:e>0?300:-300,opacity:0,scale:.9}),center:{zIndex:1,x:0,opacity:1,scale:1},exit:e=>({zIndex:0,x:e<0?300:-300,opacity:0,scale:.9})},initial:"enter",animate:"center",exit:"exit",transition:{type:"spring",stiffness:300,damping:30},className:"absolute shadow-lg rounded-lg",children:B.width>0&&l.jsx(q,{template:h,pageIndex:y,side:S,containerWidth:B.width,containerHeight:B.height})},`${y}-${S}`)})}),l.jsx("div",{className:"flex justify-center items-center pt-4 flex-shrink-0",children:Y&&l.jsx("div",{className:"flex items-center gap-2",children:m.pages.map((e,t)=>l.jsx("button",{onClick:()=>w(t),className:"h-2 rounded-full transition-all duration-300 "+(y===t?"bg-sky-500 w-6":"bg-slate-300 dark:bg-slate-600 hover:bg-slate-400 w-2")},t))})})]}),l.jsxs("div",{className:"w-full md:w-2/5 lg:w-5/12 flex flex-col overflow-hidden p-3",children:[l.jsxs("div",{className:"flex justify-between items-start mb-2",children:[l.jsx("h3",{id:"sneak-peek-title",className:"text-2xl font-bold leading-tight text-slate-800 dark:text-slate-100",children:h.name}),l.jsx("button",{onClick:o,className:"p-1.5 text-slate-500 hover:text-red-500 rounded-full hover:bg-red-500/10 transition-colors shrink-0 ml-2",children:l.jsx(C,{size:20})})]}),l.jsx("div",{className:"text-sm font-medium text-slate-500 dark:text-slate-400 mb-4 capitalize",children:m.pages[y].name||`Page ${y+1}`}),l.jsxs("div",{className:"flex-grow overflow-y-auto pr-2 custom-scrollbar space-y-4",children:[l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["A versatile"," ",l.jsx("strong",{className:"capitalize text-slate-600 dark:text-slate-300",children:t.replace(/[-_]/g," ")})," ","template. Perfect for ",s[0]||"various purposes","."]}),l.jsx(W,{icon:l.jsx(M,{size:16,className:"text-amber-500"}),title:"Usage & Licensing",children:l.jsxs("div",{className:"space-y-2",children:[l.jsx(_,{label:"Model",value:u.replace(/-/g," ")}),l.jsx(_,{label:"License",value:j})]})}),l.jsx(W,{icon:l.jsx(O,{size:16,className:"text-sky-500"}),title:"Details",children:l.jsxs("div",{className:"space-y-2",children:[l.jsx(_,{label:"Author",value:x?"System Template":c||"User"}),l.jsx(_,{label:"Rating",value:l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"font-bold",children:a?.toFixed(1)||"N/A"})," (",h.ratingCount||0," reviews)"]})})]})}),s.length>0&&l.jsx(W,{icon:l.jsx(v,{size:16,className:"text-fuchsia-500"}),title:"Tags",children:l.jsx("div",{className:"flex flex-wrap gap-2",children:s.slice(0,7).map(e=>l.jsx("span",{className:"inline-block bg-slate-200 dark:bg-slate-700 text-slate-600 dark:text-slate-300 text-xs font-semibold px-2.5 py-1 rounded-full",children:e},e))})})]}),l.jsx(G,{show:te}),l.jsx("div",{className:"mt-auto pt-5",children:(()=>{if(X)return l.jsx(L,{onClick:se,icon:l.jsx(z,{size:18}),variant:"primary",children:"Customize Template"});if(ee){const e=f?.onSale?`₹${f.salePrice}`:`₹${f?.price??"N/A"}`;return l.jsxs(L,{onClick:se,icon:l.jsx(P,{size:18}),variant:"purchase",children:["Purchase for ",e]})}return"Subscription-Based"===u?l.jsxs(L,{onClick:se,icon:l.jsx(p,{size:18}),variant:"primary",className:"bg-gradient-to-r from-purple-500 to-indigo-600",children:["Upgrade to ",e]}):l.jsx("button",{disabled:!0,className:"w-full flex items-center justify-center gap-3 font-bold rounded-lg px-6 py-3 text-base bg-slate-300 dark:bg-slate-700 text-slate-500 dark:text-slate-400 cursor-not-allowed",children:"Unavailable"})})()})]})]}),ee&&l.jsx(I,{isOpen:E,onClose:()=>H(!1),items:h?[{itemType:"Template",itemId:h._id,description:`Template: ${h.name}`,price:f?.onSale?f.salePrice:f?.price}]:[],onPaymentHandle:Z})]})})()},t)})})},G=({show:e})=>l.jsx(n,{children:e&&l.jsxs(r.div,{variants:{hidden:{opacity:0,y:-10,scale:.95},visible:{opacity:1,y:0,scale:1,transition:{type:"spring",stiffness:200,damping:20}},exit:{opacity:0,y:10,scale:.95,transition:{duration:.15}}},initial:"hidden",animate:"visible",exit:"exit",className:"relative max-w-md mx-auto my-3 px-4 py-3 rounded-xl shadow border border-amber-200 dark:border-slate-700 bg-amber-50/40 dark:bg-slate-800/60",children:[l.jsx("div",{className:"absolute -top-1 -left-1 w-6 h-6 bg-amber-400/10 dark:bg-amber-500/10 rounded-full blur-sm"}),l.jsxs("div",{className:"relative z-10 flex items-start gap-3",children:[l.jsx("div",{className:"w-8 h-8 flex items-center justify-center rounded-full bg-amber-100 dark:bg-amber-900/40",children:l.jsx(T,{className:"w-4 h-4 text-amber-500 dark:text-amber-400"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-sm font-semibold text-slate-800 dark:text-white",children:"Payment Pending"}),l.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400 leading-snug mt-0.5",children:"Your payment is still processing. Check your email."})]})]})]})});export{V as S,A as T};
